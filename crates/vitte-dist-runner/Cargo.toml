[package]
name        = "vitte-dist-runner"
description = "Distributed runner for Vitte (remote execution, sandboxing, cluster orchestration)."
version      = { workspace = true }
edition      = { workspace = true }
rust-version = { workspace = true }
license      = { workspace = true }
repository   = { workspace = true }
homepage     = { workspace = true }

readme        = "README.md"
documentation = "https://docs.rs/vitte-dist-runner"

keywords   = ["distributed", "runner", "remote", "cluster", "execution"]
categories = ["development-tools", "compilers"]

exclude = [".github/*", "examples/*", "tests/*"]

[lib]
name = "vitte_dist_runner"
path = "src/lib.rs"

[[bin]]
name = "vitte-dist-runner"
path = "src/main.rs"

[features]
default   = ["std", "ssh"]
std       = []
ssh       = ["dep:openssh"]
docker    = ["dep:duct"]
k8s       = ["dep:kube"]
serde     = ["dep:serde", "dep:serde_json"]
full      = ["std","ssh","docker","k8s","serde"]

[dependencies]

anyhow = "1"
clap = { version = "4.5", features = ["derive", "env"] }
log = "0.4"
env_logger = "0.11"
thiserror = "2.0.17"
# optional integrations
openssh    = { version = "0.9", optional = true, default-features = false }
duct       = { version = "0.13", optional = true, default-features = false }
kube       = { version = "0.91", optional = true, default-features = false, features = ["runtime"] }

# serialization
serde      = { version = "1", optional = true, features = ["derive"] }
serde_json = { version = "1", optional = true }

[dev-dependencies]
tempfile   = "3"
assert_fs  = "1"