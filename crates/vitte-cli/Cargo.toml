[package]
name        = "vitte-cli"
description = "Interface en ligne de commande du langage Vitte."

version      = { workspace = true }
edition      = { workspace = true }
rust-version = { workspace = true }
license      = { workspace = true }
repository   = { workspace = true }
homepage     = { workspace = true }
readme       = { workspace = true }

keywords   = ["vitte", "cli", "compiler", "tooling"]
categories = ["command-line-utilities", "development-tools"]

default-run = "vitte"

[lib]
name = "vitte_cli"
path = "src/lib.rs"

[[bin]]
name = "vitte"
path = "src/main.rs"

[features]
default = ["trace", "color", "modules", "vm", "fmt"]
trace   = ["dep:log", "dep:env_logger"]
color   = ["dep:owo-colors"]
vm      = ["dep:vitte-vm"]
modules = ["dep:vitte-modules", "dep:serde_json"]
fmt     = ["dep:vitte-fmt"]

[dependencies]
anyhow      = { workspace = true }
clap        = { workspace = true }
log         = { workspace = true, optional = true }
env_logger  = { workspace = true, optional = true }
owo-colors  = { workspace = true, optional = true }
serde_json  = { workspace = true, optional = true }
serde       = { workspace = true }
blake3      = "1"
vitte-modules = { path = "../../modules/vitte-modules", version = "0.1.0", optional = true }
vitte-vm = { path = "../vitte-vm", version = "0.1.0", optional = true }
vitte-fmt = { path = "../vitte-fmt", version = "0.1.0", optional = true }
vitte-grammar = { path = "../vitte-grammar" }

[dev-dependencies]
pretty_assertions = { workspace = true }
assert_cmd = "2.0"
predicates = "3.1"
insta = { version = "1.41", features = ["yaml"] }
tempfile = "3.10"
